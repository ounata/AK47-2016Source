<!-- #开始：位置条 -->
<div class="breadcrumbs" id="breadcrumbs">
    <script type="text/javascript">
        try {
            ace.settings.check('breadcrumbs', 'fixed');
        } catch (e) { }
    </script>
    <ul class="breadcrumb">
        <li class="active">
            <i class="ace-icon fa fa-home home-icon"></i>
            <a ui-sref="index">首页</a>
        </li>
        <li>
            <i class="ace-icon fa fa-pencil-square-o"></i> 产品管理
        </li>
        <li>
            产品列表
        </li>
    </ul>
</div>
<!-- /结束：位置条 -->
<div class="page-content">
    <!-- #开始：产品列表 -->
    <div class="page-content-area">
        <div class="row">
            <div class="col-sm-12">
                <!-- #开始：产品列表.查询条件 -->

                <form name="advQuery" novalidate>
                <!--高级查询-开始-->
                <div id="accordion" class="accordion-style1 panel-group">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#advance-search">
                                    <i class="ace-icon fa fa-angle-right bigger-110" data-icon-hide="fa-angle-down" data-icon-show="fa-angle-right"></i>
                                    &nbsp;高级查询条件
                                </a>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse mcs-advance-search" id="advance-search">
                            <div class="panel-body">
                                <div class="profile-user-info">

                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 产品类型</div>
                                        <div class="profile-info-value">
                                            <div ng-repeat="x in vm.dictionaries.productcategories">
                                                <a href='javascript:;' >{{x.value}}</a> 
                                                <div>
                                                <a href='javascript:;' >全选</a> 
                                                <mcs-checkbox-group category="selectedProdutCategories" data="x.childcategories" click="vm.select(category,item, eventargs)" /></div>
                                            </div>
                                        </div>
                                    </div>

<!--
<hr /><p>已选中: {{vm.criteria.selectedProdutCategories}}</p>
-->

                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 合作关系</div>
                                        <div class="profile-info-value">
                                            <mcs-checkbox-group category="selectedCooperativeRelations" data="vm.dictionaries.cooperativerelations" click="vm.select(category,item, eventargs)" />
                                        </div>
                                    </div>

                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 年级</div>
                                        <div class="profile-info-value">
                                            <mcs-checkbox-group category="selectedGrades" data="vm.dictionaries.grades" click="vm.select(category,item, eventargs)" />
                                        </div>
                                    </div>

                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 科目</div>
                                        <div class="profile-info-value">
                                            <mcs-checkbox-group category="selectedSubjects" data="vm.dictionaries.subjects" click="vm.select(category,item, eventargs)" />
                                        </div>
                                    </div>
                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 课程级别</div>
                                        <div class="profile-info-value">
                                            <mcs-checkbox-group category="selectedCourseLevels" data="vm.dictionaries.courselevels" click="vm.select(category,item, eventargs)" />
                                        </div>
                                    </div>

                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 辅导类型</div>
                                        <div class="profile-info-value">
                                            <mcs-checkbox-group category="selectedTutoringTypes" data="vm.dictionaries.tutoringtypes" click="vm.select(category,item, eventargs)" />
                                        </div>
                                    </div>


                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 课程季节</div>
                                        <div class="profile-info-value">
                                            <mcs-checkbox-group category="selectedCourseSeasons" data="vm.dictionaries.courseseasons" click="vm.select(category,item, eventargs)" />
                                        </div>
                                    </div>

                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 班级类型</div>
                                        <div class="profile-info-value">
                                            <mcs-checkbox-group category="selectedClassTypes" data="vm.dictionaries.classtypes" click="vm.select(category,item, eventargs)" />
                                        </div>
                                    </div>


                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 满班人数</div>
                                        <div class="profile-info-value">
                                            <mcs-input placeholder="最小满班人数" model="vm.minPeopleCount" name="minPeopleCount" type="number" min="0" ng-pattern="/^\d+$/" />-
                                            <mcs-input placeholder="最大满班人数" model="vm.maxPeopleCount" name="maxPeopleCount" type="number" min="0" ng-pattern="/^\d+$/" />
                                            <span style="color:red" ng-show="vm.minPeopleCount > vm.maxPeopleCount ">最小 不能大于 最大</span>
                                            <span style="color:red" ng-show="advQuery.minPeopleCount.$invalid || advQuery.maxPeopleCount.$invalid">满班人数 非法输入</span>
                                        </div>
                                    </div>

                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 客户折扣</div>
                                        <div class="profile-info-value">
                                            <mcs-input placeholder="最低折扣率" model="vm.minDiscountRate" type="number" step="0.01" min="0" name="minDiscountRate" ng-pattern="/^0(\.\d{1,2})?$/" />-
                                            <mcs-input placeholder="最高折扣率" model="vm.maxDiscountRate" type="number" step="0.01" min="0" name="maxDiscountRate" ng-pattern="/^0(\.\d{1,2})?$/" />
                                            <span style="color:red" ng-show="vm.minDiscountRate > vm.maxDiscountRate">最低折扣率不能高于最高折扣率</span>
                                            <span style="color:red" ng-show="advQuery.minDiscountRate.$invalid || advQuery.maxDiscountRate.$invalid">订购优惠金额 非法输入</span>
                                        </div>
                                    </div>

                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 订购优惠金额</div>
                                        <div class="profile-info-value">
                                            <mcs-input placeholder="最小优惠金额" model="vm.minDiscountAmount" name="minDiscountAmount" type="number" step="0.01" min="0"  ng-pattern="/^\d{0,7}(\.\d{1,2})?$/" />-
                                            <mcs-input placeholder="最大优惠金额" model="vm.maxDiscountAmount" name="maxDiscountAmount" type="number" step="0.01" min="0"  ng-pattern="/^\d{0,7}(\.\d{1,2})?$/" />
                                            <span style="color:red" ng-show="advQuery.minDiscountAmount.$invalid || advQuery.maxDiscountAmount.$invalid">订购优惠金额 非法输入</span>
                                        </div>
                                    </div>


                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 单价类型</div>
                                        <div class="profile-info-value">
                                            <mcs-checkbox-group category="selectedUnitPriceTypes" data="vm.dictionaries.unitpricetypes" click="vm.select(category,item, eventargs)" />
                                        </div>
                                    </div>

                                    <div class="profile-info-row">
                                        <div class="profile-info-name"> 单价区间</div>
                                        <div class="profile-info-value">
                                            <mcs-input placeholder="最小金额" model="vm.minAmount" name="minAmount" type="number" step="0.01" min="0"  ng-pattern="/^\d{0,7}(\.\d{1,2})?$/" />-
                                            <mcs-input placeholder="最大金额" model="vm.maxAmount" name="maxAmount" type="number" step="0.01" min="0"  ng-pattern="/^\d{0,7}(\.\d{1,2})?$/" />
                                            <span style="color:red" ng-show="vm.minAmount> vm.maxAmount">最小金额 不能高于 最大金额</span>
                                            <span style="color:red" ng-show="advQuery.minAmount.$invalid || advQuery.maxAmount.$invalid">单价区间 非法输入</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--高级查询-结束-->

                </form>

                <div class="mcs-panel-search well well-sm">
                    <div class="portlet">
                        <div class="portlet-title line">
                            <div class="caption">
                                <label class="quick-search"><i class="ace-icon fa fa-search bigger-125"></i> 快速查询条件</label>
                            </div>
                        </div>
                        <div class="portlet-body">
                            <select><option>选择大区</option></select>
                            <select><option>选择分公司</option></select>
                            <select><option>选择校区</option></select>
                            <select><option>产品类型</option></select>
                            <select><option>是否合作</option></select>
                            <mcs-input placeholder="产品名称" model="vm.productname" />
                            <mcs-input placeholder="产品编码" model="vm.productcode" />
                            <mcs-input placeholder="创建人" model="vm.creator" />
                            <select><option>销售状态</option></select>
                            <select><option>时间类型</option></select>
                            <select><option>开始时间</option></select>
                            <select><option>结束时间</option></select>
                            <mcs-button type="search" click="vm.search()" size="medium" />
                        </div>
                    </div>
                </div>
                <!-- /结束：产品列表.查询条件 -->
                <!-- #开始：产品列表.工具条 -->
                <div class="mcs-panel-toolbar">
                    <mcs-button type="add" text="新增" click="vm.createProduct()" ></mcs-button>
                    <mcs-button type="delete"></mcs-button>
                    <mcs-button type="edit" text="止售产品"></mcs-button>
                    <mcs-button type="edit" text="延期产品"></mcs-button>
                    <mcs-button type="edit" text="复制创建产品" click="vm.copyProduct(1)" ></mcs-button>
                    <mcs-button type="add" text="创建班级"></mcs-button>

                </div>
                <!-- /结束：产品列表.工具条 -->
                <!-- #开始：产品列表.数据表格 -->
                <div>
                    <table class="table table-striped table-bordered table-hover">
                        <thead class="thin-border-bottom">
                            <tr>
                                <th class="center" width="40">
                                    <label class="position-relative">
                                        <input class="ace" type="checkbox">
                                        <span class="lbl"></span>
                                    </label>
                                </th>
                                <th>
                                   产品编码 
                                </th>
                                <th>
                                   产品名称 
                                </th>
                                <th>
                                   销售大区 
                                </th>
                                <th>
                                   产品类型 
                                </th>
                                <th>
                                   产品分类 
                                </th>
                                <th>
                                    年级
                                </th>
                                <th>
                                   时长（分钟） 
                                </th>
                                <th>
                                   产品单价（元） 
                                </th>
                                <th>
                                   合作单价（元） 
                                </th>
                                <th>
                                    辅导类型
                                </th>
                                <th>
                                    启售时间
                                </th>
                                <th>
                                    止售时间
                                </th>
                                <th>
                                    创建人
                                </th>
                                <th>
                                    销售状态
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="product in vm.pagedList.data" ng-class="{'mcs-tr-selected': product.isSelected }">
                                <td class="center">
                                    <label class="position-relative">
                                        <input class="ace" type="checkbox" ng-model="product.isSelected">
                                        <span class="lbl"></span>
                                    </label>
                                </td>
                                <td>
                                    <i class="fa fa-circle" ng-class="{1: 'mcs-status-success', 0: 'mcs-status-danger'}[student.status]"></i>
                                    <!--<span ng-class="{1: 'badge badge-success', 0: 'badge badge-pink'}[student.Status]">1</span>-->
                                    <a href="javascript:void(0)">{{product.productName}}</a>
                                </td>
                                <td>
                                    <a href="javascript:void(0)">{{product.productCode}}</a>
                                </td>
                                <td>
                                    {{product.parentsName}}
                                </td>
                                <td>
                                    {{product.firstContractDate | date: 'yyyy-MM-dd'}}
                                </td>
                                <td>
                                    {{product.schoolName}}
                                </td>
                                <td>
                                    {{product.gradeName}}
                                </td>
                                <td>
                                    {{product.teacherXG}}
                                </td>
                                <td>
                                    {{product.teacherZX}}
                                </td>
                                <td>
                                    {{product.contractCount}}
                                </td>
                                <td>
                                    {{product.remainCount}}
                                </td>
                                <td class="text-right">
                                    {{product.accountValue | currency:'￥'}}
                                </td>
                                <td class="text-right">
                                    {{product.balanceValue | currency:'￥'}}
                                </td>
                                <td class="text-right">
                                    {{product.avalibleValue | currency:'￥'}}
                                </td>
                                <td>
                                    {{product.hourFromLastClass}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div ng-show="vm.pagedList.pagedParam.totalCount==0" class="center well well-sm red bigger-110">没有查询到任何数据</div>
                </div>
                <div ng-show="vm.pagedList.pagedParam.totalCount>0" class="mcs-panel-pager well well-sm">
                    <!--<span class="bigger-110">{{vm.pagedList.pagedParam.message}}</span>
                    <uib-pagination boundary-links="true" ng-change="vm.pageChanged()" total-items="vm.pagedList.pagedParam.totalCount" ng-model="vm.criteria.pagedParam.page" class="pagination" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>-->
                </div>
                <!-- /结束：产品列表.数据表格 -->
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /结束：产品列表 -->
</div>

